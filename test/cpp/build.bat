@ECHO off
SETLOCAL

CL.exe 1> NUL 2> NUL
IF ERRORLEVEL 1 (
  ECHO CL.exe program not found. You have to setup VisualC++ environment.
  GOTO build_return
)

SET flags=/nologo /DWIN32 /MD /O2 /W3 /EHsc /GR 

SET cppflags=%flags%
REM // WARNING : the below is modified by g4tools/mgr/build.
SET cppflags=%cppflags% /I..\..

REM //////////////////////////////////////////////////////////////
REM /// histo.cpp ////////////////////////////////////////////////
REM //////////////////////////////////////////////////////////////
CL.exe %cppflags% /c /Fo.\histo.obj /Tp.\histo.cpp
LINK.exe /nologo /OPT:NOREF /out:.\tools_test_histo.exe .\histo.obj
DEL histo.obj

REM //////////////////////////////////////////////////////////////
REM /// wroot.cpp ////////////////////////////////////////////////
REM //////////////////////////////////////////////////////////////
CL.exe %cppflags% /c /Fo.\wroot.obj /Tp.\wroot.cpp
LINK.exe /nologo /OPT:NOREF /out:.\tools_test_wroot.exe .\wroot.obj
DEL wroot.obj

REM //////////////////////////////////////////////////////////////
REM /// waxml.cpp ////////////////////////////////////////////////
REM //////////////////////////////////////////////////////////////
CL.exe %cppflags% /c /Fo.\waxml.obj /Tp.\waxml.cpp
LINK.exe /nologo /OPT:NOREF /out:.\tools_test_waxml.exe .\waxml.obj
DEL waxml.obj

REM //////////////////////////////////////////////////////////////
REM /// wcsv.cpp ////////////////////////////////////////////////
REM //////////////////////////////////////////////////////////////
CL.exe %cppflags% /c /Fo.\wcsv.obj /Tp.\wcsv.cpp
LINK.exe /nologo /OPT:NOREF /out:.\tools_test_wcsv.exe .\wcsv.obj
DEL wcsv.obj

REM //////////////////////////////////////////////////////////////
REM //////////////////////////////////////////////////////////////
REM //////////////////////////////////////////////////////////////

:build_return
ENDLOCAL
@ECHO on
